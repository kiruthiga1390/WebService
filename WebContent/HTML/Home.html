<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>Insert title here</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
	$("#submit").click(function(){
		url = "http://localhost:8080/Patient_Monitoring/rest/WebService/getpatientdetails?patientId=" + 
				$('#form1').find('input[name="patientId"]').val();
		
	    $.get(url, function(data){
	      //alert("Data: " + data + "\nStatus: " + status);
	      xmlString = (new XMLSerializer()).serializeToString(data);
	      alert(xmlString);
	      var xmldata = $.parseXML(xmlString);
	      var jqObj = $(xmldata);
	            var patient = jqObj.find('patient');
	            var id= patient.find('id').text();
	            var name= patient.find('name').text();
	            var age=patient.find('age').text();
	            var insurance=patient.find('insurance').text();
	            var address =patient.find('address').text();
	      

	          var row = $('<tr />');
	        
	            $('<td>' + id + '</td>').appendTo(row);  
	            $('<td>' + name + '</td>').appendTo(row); 
	            $('<td>' + age + '</td>').appendTo(row); 
	            $('<td>' + insurance + '</td>').appendTo(row); 
	            $('<td>' + address + '</td>').appendTo(row);
	          
	          $('#t01').append(row); 
	           
	       $('#t01').css("display","block");
	    
	  });
    
    
    });
	$("#submit2").click(function(){
		url = "http://localhost:8080/Patient_Monitoring/rest/WebService/getpatienthistory?patientId=" + 
				$('#form2').find('input[name="patientId"]').val();
		
	    $.get(url, function(data){
	      //alert("Data: " + data + "\nStatus: " + status);
	      xmlString = (new XMLSerializer()).serializeToString(data);
	      alert(xmlString);
	      var xmldata = $.parseXML(xmlString);
	      var jqObj = $(xmldata);
	            var patient = jqObj.find('patient');
	            var id= patient.find('id').text();
	            var admissiondate= patient.find('admissiondate').text();
	            var dischargeDate=patient.find('dischargeDate').text();
	            var treatementName=patient.find('treatementName').text();
	            var medicine =patient.find('medicine').text();
	            var dosage =patient.find('dosage').text();

	         
	          var row = $('<tr />');
	        
	            $('<td>' + id + '</td>').appendTo(row);  
	            $('<td>' + admissiondate + '</td>').appendTo(row); 
	            $('<td>' + dischargeDate + '</td>').appendTo(row); 
	            $('<td>' + treatementName + '</td>').appendTo(row); 
	            $('<td>' + medicine + '</td>').appendTo(row);
	            $('<td>' + dosage + '</td>').appendTo(row);
	            
	          $('#t02').append(row); 
	           
	       $('#t02').css("display","block");
	    
	  });
	    
    });
	$("#submit4").click(function(){
		url = "http://localhost:8080/Patient_Monitoring/rest/WebService/getbilling?patientId=" + 
				$('#form4').find('input[name="patientId"]').val();		
	    
	    $.getJSON(url,
	    	    function (json) {
	    			jsonString = JSON.stringify(json);
	    			Jsonobj = JSON.parse(jsonString)
		      		alert(jsonString);
	    	        var tr;
	    	        
	    	        	alert(Jsonobj.patient_id);
	    	            tr = $('<tr/>');
	    	            tr.append("<td>" + Jsonobj.patient_id + "</td>");
	    	            tr.append("<td>" + Jsonobj.patient_name + "</td>");
	    	            tr.append("<td>" + Jsonobj.bill_amount + "</td>");
	    	            tr.append("<td>" + Jsonobj.treatment_name + "</td>");
	    	            tr.append("<td>" + Jsonobj.insurance + "</td>");
	    	            
	    	        $('#t04').append(tr); 
	 	           
	    		    $('#t04').css("display","block");
	    	    });
	    
    });
	
	$("#formButton").click(function(){
        $("#form1").toggle();
    });
	
	$("#formButton2").click(function(){
        $("#form2").toggle();
    });

	$("#formButton4").click(function(){
        $("#form4").toggle();
    });
});

</script>
<style>
#form1 {

display:none;

}
#t01 {

display:none;

}
#form2 {

display:none;

}
#t02 {

display:none;

}
#form4 {

display:none;

}
#t04 {

display:none;

}


</style>

<body>
<button type="button"  id="formButton">GetPatientDetail</button>
<button type="button" id="formButton2">GetPatientHistory</button>
<button type="button" id="formButton4">GetBilling</button>
<!-- <button type="button"  id="formButton3">DeletePatient</button> -->



<form id="form1" action="#" >
  <b>Patient ID:</b> <input type="text" name="patientId" id="patientId">
   <button type="button" id="submit">Submit</button>
</form>
<form id="form2" action="#" >
  <b>Patient ID:</b> <input type="text" name="patientId" id="patientId">
   <button type="button" id="submit2">Submit</button>
</form>
<form id="form4" action="#" >
  <b>Patient ID:</b> <input type="text" name="patientId" id="patientId">
   <button type="button" id="submit4">Submit</button>
</form>


<table id="t01" border="2" style="width:auto" align="center">
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Age</th>
    <th>Insurance</th>
    <th>Address</th>
  </tr>
</table>

<table id="t02" border="2" style="width:auto" align="center">
  <tr>
    <th>ID</th>
    <th>AdmissionDate</th>
    <th>DischargeDate</th>
    <th>TreatmentName</th>
    <th>Medicine</th>
     <th>Dosage</th>
  </tr>
</table>

<table id="t04" border="2" style="width:auto" align="center">
  <tr>
    <th>Patient ID</th>
    <th>Patient Name</th>
    <th>Bill Amount</th>
    <th>Treatment Name</th>
    <th>Insurance</th>
  </tr>
</table>


</body>
</html>